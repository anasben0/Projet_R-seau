<div class="events-container">
  <!-- Header -->
  <div class="events-header">
    <div class="header-content">
      <button class="back-btn" (click)="goToDashboard()">
        ‚Üê Retour √† la CaRRte
      </button>
      <h1>üìÖ Planning Events RRezo</h1>
      <!-- Bouton admin pour cr√©er un √©v√©nement -->
      <button *ngIf="isAdmin" class="admin-create-btn" (click)="toggleCreateForm()">
        {{ showCreateForm ? '‚ùå Annuler' : '‚ûï Cr√©er un √©v√©nement' }}
      </button>
    </div>
  </div>

  <!-- Formulaire de cr√©ation (visible uniquement pour les admins) -->
  <div *ngIf="isAdmin && showCreateForm" class="create-form-section">
    <div class="create-form">
      <h2>‚ûï Cr√©er un nouvel √©v√©nement</h2>
      <form (ngSubmit)="createEvent()">
        <div class="form-row">
          <div class="form-group">
            <label for="schoolId">√âcole *</label>
            <select id="schoolId" [(ngModel)]="newEvent.schoolId" name="schoolId" required>
              <option value="">-- S√©lectionner une √©cole --</option>
              <option *ngFor="let school of schools" [value]="school.id">
                {{ school.name }}
              </option>
            </select>
          </div>

          <div class="form-group">
            <label for="name">Nom de l'√©v√©nement *</label>
            <input 
              type="text" 
              id="name"
              [(ngModel)]="newEvent.name" 
              name="name"
              required
              placeholder="Ex: WEC SACLAY 2025">
          </div>
        </div>

        <div class="form-group">
          <label for="activities">Activit√©s</label>
          <textarea 
            id="activities"
            [(ngModel)]="newEvent.activities" 
            name="activities"
            rows="2"
            placeholder="Ex: Soir√©es, concerts, animations..."></textarea>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="startsAt">Date de d√©but *</label>
            <input 
              type="datetime-local" 
              id="startsAt"
              [(ngModel)]="newEvent.startsAt" 
              name="startsAt"
              required>
          </div>

          <div class="form-group">
            <label for="endsAt">Date de fin</label>
            <input 
              type="datetime-local" 
              id="endsAt"
              [(ngModel)]="newEvent.endsAt" 
              name="endsAt">
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="address">Adresse *</label>
            <input 
              type="text" 
              id="address"
              [(ngModel)]="newEvent.address" 
              name="address"
              required
              placeholder="Ex: 15 Avenue de la R√©publique, 75001 Paris">
          </div>

          <div class="form-group">
            <label for="room">Salle</label>
            <input 
              type="text" 
              id="room"
              [(ngModel)]="newEvent.room" 
              name="room"
              placeholder="Ex: Amphith√©√¢tre A">
          </div>
        </div>

        <div class="form-actions">
          <button type="submit" class="btn-submit">
            ‚úÖ Cr√©er l'√©v√©nement
          </button>
          <button type="button" class="btn-cancel" (click)="toggleCreateForm()">
            ‚ùå Annuler
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- Main Content -->
  <div class="events-content">
    <!-- Filtres par mois -->
    <div class="filters-section">
      <h2>Filtrer par mois</h2>
      <div class="month-filters">
        <button 
          *ngFor="let month of months" 
          class="filter-btn"
          [class.active]="selectedMonth === month"
          (click)="filterByMonth(month)">
          {{ month }}
        </button>
      </div>
    </div>

    <!-- Compteur d'√©v√©nements -->
    <div class="events-stats">
      <p>
        <strong>{{ filteredEvents.length }}</strong> √©v√©nement(s) 
        <span *ngIf="selectedMonth !== 'Tous'">en {{ selectedMonth }}</span>
      </p>
    </div>

    <!-- Liste des √©v√©nements -->
    <div class="events-grid">
      <div 
        *ngFor="let event of filteredEvents" 
        class="event-card"
        [style.border-left-color]="event.color">
        
        <!-- Badge de couleur -->
        <div class="event-color-badge" [style.background-color]="event.color"></div>
        
        <!-- Contenu de la carte -->
        <div class="event-content">
          <div class="event-header-row">
            <h3 class="event-name">{{ event.name }}</h3>
            <span class="event-month">{{ event.month }}</span>
          </div>
          
          <div class="event-details">
            <div class="event-info">
              <span class="icon">üìç</span>
              <span>{{ event.location }}</span>
            </div>
            <div class="event-info">
              <span class="icon">üìÜ</span>
              <span>{{ event.dates }} {{ event.month }}</span>
            </div>
          </div>
          
          <p class="event-description">{{ event.description }}</p>
          
          <button class="view-btn" (click)="viewEventDetails(event)">
            Voir les d√©tails ‚Üí
          </button>
        </div>
      </div>
    </div>

    <!-- Message si aucun √©v√©nement -->
    <div *ngIf="filteredEvents.length === 0" class="no-events">
      <p>üòî Aucun √©v√©nement trouv√© pour ce mois</p>
    </div>
  </div>
</div>
