<div class="accommodations-container">
  <!-- Header -->
  <div class="accommodations-header">
    <div class="header-content">
      <button class="back-btn" (click)="goToDashboard()">
        â† Retour Ã  la CaRRte
      </button>
      <h1>ğŸ  HÃ©bergements Polytech</h1>
      <p>Trouvez un logement pour vos Ã©vÃ©nements rÃ©seau</p>
    </div>
  </div>

  <!-- Main Content -->
  <div class="accommodations-content">
    
    <!-- Section recherche -->
    <div class="search-section">
      <div class="search-bar">
        <span class="search-icon">ğŸ”</span>
        <input 
          type="text" 
          [(ngModel)]="searchQuery"
          (input)="onSearchChange()"
          placeholder="Rechercher un hÃ©bergement par nom, adresse ou ville..."
          class="search-input">
      </div>
    </div>

    <!-- Filtres par ville -->
    <div class="filters-section">
      <h2>Filtrer par ville</h2>
      <div class="city-filters">
        <button 
          *ngFor="let city of availableCities" 
          class="filter-btn"
          [class.active]="selectedCity === city"
          (click)="filterByCity(city)">
          {{ city }}
        </button>
      </div>
    </div>

    <!-- Bouton Ajouter (Admin uniquement) -->
    <div class="admin-section" *ngIf="isAdmin">
      <button class="add-btn" (click)="toggleAddForm()">
        {{ showAddForm ? 'âŒ Annuler' : 'â• Ajouter un hÃ©bergement' }}
      </button>
    </div>

    <!-- Formulaire d'ajout (Admin) -->
    <div class="add-form-container" *ngIf="showAddForm && isAdmin">
      <h3>â• Nouveau hÃ©bergement</h3>
      <form class="add-form" (ngSubmit)="addAccommodation()">
        <div class="form-row">
          <div class="form-group">
            <label>Titre *</label>
            <input 
              type="text" 
              [(ngModel)]="newAccommodation.title" 
              name="title"
              placeholder="Ex: RÃ©sidence Polytech"
              required>
          </div>
          <div class="form-group">
            <label>Ville *</label>
            <select [(ngModel)]="newAccommodation.city" name="city" required>
              <option value="">SÃ©lectionner une ville</option>
              <option *ngFor="let city of availableCities.slice(1)" [value]="city">{{ city }}</option>
            </select>
          </div>
        </div>

        <div class="form-group">
          <label>Adresse *</label>
          <input 
            type="text" 
            [(ngModel)]="newAccommodation.address" 
            name="address"
            placeholder="Ex: 15 Rue de la RÃ©publique"
            required>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>CapacitÃ© (nombre de places) *</label>
            <input 
              type="number" 
              [(ngModel)]="newAccommodation.capacity" 
              name="capacity"
              min="1"
              required>
          </div>
          <div class="form-group">
            <label>Contact (email ou tÃ©lÃ©phone)</label>
            <input 
              type="text" 
              [(ngModel)]="newAccommodation.contact" 
              name="contact"
              placeholder="email@example.com ou 06 12 34 56 78">
          </div>
        </div>

        <button type="submit" class="submit-btn">
          âœ… Ajouter l'hÃ©bergement
        </button>
      </form>
    </div>

    <!-- Statistiques -->
    <div class="stats-section">
      <div class="stat-card">
        <div class="stat-icon">ğŸ </div>
        <div class="stat-content">
          <h3>{{ filteredAccommodations.length }}</h3>
          <p>HÃ©bergement(s) trouvÃ©(s)</p>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">ğŸ›ï¸</div>
        <div class="stat-content">
          <h3>{{ getTotalAvailableSpots() }}</h3>
          <p>Place(s) disponible(s)</p>
        </div>
      </div>
    </div>

    <!-- Liste des hÃ©bergements -->
    <div class="accommodations-grid">
      <div 
        *ngFor="let accommodation of filteredAccommodations" 
        class="accommodation-card"
        [class.full]="accommodation.availableSpots === 0">
        
        <!-- Badge de disponibilitÃ© -->
        <div class="availability-badge" [ngClass]="getAvailabilityClass(accommodation)">
          {{ getAvailabilityText(accommodation) }}
        </div>

        <!-- Contenu de la carte -->
        <div class="card-header">
          <h3>{{ accommodation.title }}</h3>
          <span class="city-badge">ğŸ“ {{ accommodation.city }}</span>
        </div>

        <div class="card-body">
          <div class="info-item">
            <span class="icon">ğŸ“</span>
            <span>{{ accommodation.address }}</span>
          </div>

          <div class="info-item">
            <span class="icon">ğŸ‘¥</span>
            <span>{{ accommodation.availableSpots }} / {{ accommodation.capacity }} places</span>
          </div>

          <div class="info-item" *ngIf="accommodation.contact">
            <span class="icon">ğŸ“</span>
            <span>{{ accommodation.contact }}</span>
          </div>

          <div class="progress-bar">
            <div 
              class="progress-fill" 
              [style.width.%]="(accommodation.availableSpots / accommodation.capacity) * 100"
              [ngClass]="getAvailabilityClass(accommodation)">
            </div>
          </div>
        </div>

        <div class="card-footer">
          <button 
            class="contact-btn" 
            (click)="contactAccommodation(accommodation)"
            [disabled]="accommodation.availableSpots === 0">
            <span *ngIf="accommodation.availableSpots > 0">ğŸ“§ Contacter</span>
            <span *ngIf="accommodation.availableSpots === 0">âŒ Complet</span>
          </button>
        </div>
      </div>
    </div>

    <!-- Message si aucun hÃ©bergement -->
    <div *ngIf="filteredAccommodations.length === 0" class="no-results">
      <div class="no-results-icon">ğŸšï¸</div>
      <h3>Aucun hÃ©bergement trouvÃ©</h3>
      <p>Essayez de modifier vos critÃ¨res de recherche</p>
    </div>

  </div>
</div>
