<!-- Debug: Component loaded -->
<!-- Message de chargement -->
<div *ngIf="!event" class="loading-container">
  <h2>ğŸ” Chargement de l'Ã©vÃ©nement...</h2>
  <p>Si cette page reste blanche, l'Ã©vÃ©nement n'existe pas.</p>
  <button class="back-btn" (click)="goBack()">â† Retour aux Ã©vÃ©nements</button>
</div>

<div class="event-details-container" *ngIf="event">
  <!-- Header avec couleur de l'Ã©vÃ©nement -->
  <div class="event-header" [style.background]="'linear-gradient(135deg, ' + event.color + ' 0%, ' + event.color + 'dd 100%)'">
    <div class="header-content">
      <button class="back-btn" (click)="goBack()">
        â† Retour aux Ã©vÃ©nements
      </button>
      <div class="event-title-section">
        <h1>{{ event.name }}</h1>
        <div class="event-meta">
          <span class="meta-item">
            <span class="icon">ğŸ“</span>
            {{ event.location }}
          </span>
          <span class="meta-item">
            <span class="icon">ğŸ“†</span>
            {{ event.dates }} {{ event.month }}
          </span>
        </div>
      </div>
      <!-- Bouton modifier pour les admins -->
      <button *ngIf="isAdmin" class="edit-btn" (click)="toggleEditForm()">
        {{ showEditForm ? 'âŒ Annuler' : 'âœï¸ Modifier' }}
      </button>
    </div>
  </div>

  <!-- Formulaire de modification (visible uniquement pour les admins) -->
  <div *ngIf="showEditForm && isAdmin" class="edit-form-container">
    <h2>âœï¸ Modifier l'Ã©vÃ©nement</h2>
    <form class="edit-form" (ngSubmit)="saveEvent()">
      <div class="form-group">
        <label>Nom de l'Ã©vÃ©nement</label>
        <input type="text" [(ngModel)]="editForm.name" name="name" required>
      </div>
      <div class="form-group">
        <label>Ã‰cole (non modifiable)</label>
        <input type="text" [value]="'Polytech ' + event.location" name="school" disabled readonly style="background: #f0f0f0; cursor: not-allowed;">
      </div>
      <div class="form-group">
        <label>Adresse exacte de l'Ã©vÃ©nement</label>
        <input type="text" [(ngModel)]="editForm.address" name="address" required placeholder="Ex: 15 rue de la FÃªte, Orsay, France">
      </div>
      <div class="form-group">
        <label>Dates</label>
        <input type="text" [(ngModel)]="editForm.dates" name="dates" required placeholder="Ex: 12-14">
      </div>
      <div class="form-group">
        <label>Description</label>
        <textarea [(ngModel)]="editForm.description" name="description" rows="4" required></textarea>
      </div>
      <div class="form-actions">
        <button type="submit" class="btn-save">ğŸ’¾ Enregistrer</button>
        <button type="button" class="btn-cancel" (click)="cancelEdit()">âŒ Annuler</button>
      </div>
    </form>
  </div>

  <!-- Contenu principal -->
  <div class="event-content">
    <!-- Description de l'Ã©vÃ©nement -->
    <div class="event-description-card">
      <h2>ğŸ“‹ Description de l'Ã©vÃ©nement</h2>
      <p>{{ event.description }}</p>
      <div class="event-details-grid">
        <div class="detail-item">
          <div class="detail-icon">ğŸ“…</div>
          <div class="detail-content">
            <h3>Date</h3>
            <p>{{ event.dates }} {{ event.month }}</p>
          </div>
        </div>
        <div class="detail-item">
          <div class="detail-icon">ğŸ«</div>
          <div class="detail-content">
            <h3>Ã‰cole</h3>
            <p>Polytech {{ event.location }}</p>
          </div>
        </div>
        <div class="detail-item">
          <div class="detail-icon">ğŸ“</div>
          <div class="detail-content">
            <h3>Adresse</h3>
            <p>{{ event.address }}</p>
          </div>
        </div>
        <div class="detail-item">
          <div class="detail-icon">ğŸ‰</div>
          <div class="detail-content">
            <h3>Type</h3>
            <p>Ã‰vÃ©nement RÃ©seau Polytech</p>
          </div>
        </div>
        <div class="detail-item">
          <div class="detail-icon" [style.color]="event.color">â¬¤</div>
          <div class="detail-content">
            <h3>ThÃ¨me</h3>
            <p>{{ event.name }}</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Options principales -->
    <div class="action-cards-container">
      <h2>ğŸ¯ Organiser votre participation</h2>
      <div class="action-cards">
        <!-- Carte HÃ©bergement -->
        <div class="action-card accommodation" (click)="goToAccommodation()">
          <div class="card-icon">ğŸ </div>
          <h3>Trouver un logement</h3>
          <p>Recherchez un hÃ©bergement Ã  {{ event.location }} pour l'Ã©vÃ©nement</p>
          <button class="action-btn">
            Voir les hÃ©bergements Ã  {{ event.location }} â†’
          </button>
        </div>

        <!-- Carte Covoiturage -->
        <div class="action-card carpooling" (click)="goToCarpooling()">
          <div class="card-icon">ğŸš—</div>
          <h3>Covoiturage</h3>
          <p>Trouvez un covoiturage pour vous rendre Ã  {{ event.location }}</p>
          <button class="action-btn">
            Voir les covoiturages â†’
          </button>
        </div>
      </div>
    </div>

    <!-- Informations supplÃ©mentaires -->
    <div class="additional-info">
      <h2>â„¹ï¸ Informations pratiques</h2>
      <div class="info-grid">
        <div class="info-card">
          <h4>ğŸ« Inscription</h4>
          <p>L'inscription est obligatoire pour participer Ã  cet Ã©vÃ©nement</p>
        </div>
        <div class="info-card">
          <h4>ğŸ‘¥ Participants</h4>
          <p>Rejoignez les Ã©tudiants de toutes les Ã©coles Polytech</p>
        </div>
        <div class="info-card">
          <h4>ğŸ“± Contact</h4>
          <p>Pour plus d'informations, contactez le BDE de votre Ã©cole</p>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Message si l'Ã©vÃ©nement n'existe pas -->
<div class="error-container" *ngIf="!event">
  <h2>âŒ Ã‰vÃ©nement introuvable</h2>
  <p>L'Ã©vÃ©nement que vous recherchez n'existe pas.</p>
  <button class="back-btn" (click)="goBack()">â† Retour aux Ã©vÃ©nements</button>
</div>
